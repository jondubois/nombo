{
  "name": "cachemere",
  "description": "A nice, smooth, cushiony layer of cache",
  "version": "0.9.4",
  "author": {
    "name": "JF Gros-Dubois",
    "email": "flashthink@gmail.com"
  },
  "contributors": [
    {
      "name": "JF Gros-Dubois",
      "email": "flashthink@gmail.com"
    }
  ],
  "devDependencies": {},
  "keywords": [
    "cache",
    "caching",
    "server",
    "fs",
    "cachemere",
    "cashmere"
  ],
  "repository": {
    "type": "git",
    "url": "git://github.com/topcloud/cachemere.git"
  },
  "engines": {
    "node": ">= 0.8.0"
  },
  "dependencies": {
    "async": "0.1.22",
    "mime": "1.2.5"
  },
  "readme": "Cachemere\r\n======\r\n\r\nA nice, smooth, cushiony layer of cache.\r\n\r\nCachemere is a static file fetching/caching engine which greatly reduces the number of disk I/O operations and eases the CPU load on your server.\r\nCachemere caches preprocessed and/or compressed file contents and updates them when the related files change on the file system.\r\nBy default, Cachemere also generates necessary ETag headers for client-side caching - Default headers can be modified as required before being sent.\r\n\r\nTo install, run:\r\n\r\n```bash\r\nnpm install cachemere\r\n```\r\n\r\n==================\r\n\r\n#### Basic example (fetches a file from disk or cache):\r\n\r\n```js\r\nvar cachemere = require('cachemere');\r\nvar http = require('http');\r\n\r\nvar server = http.createServer(function (req, res) {\r\n    cachemere.fetch(req, function (err, resource) {\r\n\t\t/*\r\n\t\tNote that you can manipulate the Resource object's \r\n\t\tproperties before outputting it to the response.\r\n\t\t*/\r\n        resource.output(res);\r\n    });\r\n});\r\n\r\nserver.listen(8000);\r\n```\r\n\r\n==================\r\n\r\n## API\r\n\r\n#### Top-level\r\n\r\nThese are exposed by `require('cachemere')`:\r\n\r\n##### Events\r\n\r\n- `ready`\r\n\t- Emitted when all pending resources have been cached.\r\n- `hit`\r\n\t- Emitted when a resource is fetched from cache\r\n\t- **Arguments**\r\n\t\t- `url`: A resource URL\r\n- `miss`\r\n\t- Emitted when a resource misses the cache and is fetched from disk\r\n\t- **Arguments**\r\n\t\t- `url`: A resource URL\r\n- `notice`\r\n\t- Emitted when Cachemere encounters a notice error - These errors are very low importance - For example, fetching a file which does not exist will cause a notice to be emitted.\r\n\t- **Arguments**\r\n\t\t- `err`: An instance of Error with an additional property 'type' which can be 'read' (cachemere.ERROR_TYPE_READ), 'compress' (cachemere.ERROR_TYPE_COMPRESS) or 'prep' (cachemere.ERROR_TYPE_PREP).\r\n- `error`\r\n\t- Emitted when Cachemere encounters an error - These errors don't need to be handled explicitly since Cachemere handles them internally - This event is mostly for logging purposes.\r\n\t- **Arguments**\r\n\t\t- `err`: An instance of Error with an additional property 'type' which can be 'read' (cachemere.ERROR_TYPE_READ), 'compress' (cachemere.ERROR_TYPE_COMPRESS) or 'prep' (cachemere.ERROR_TYPE_PREP).\r\n\r\n##### Methods\r\n\r\n- `init`\r\n\t- Resets and initializes Cachemere with an options object.\r\n\t- **Parameters**\r\n\t\t- `Object`: (Optional) An options object which Cachemere will use to configure itself.\r\n\t\tThe options object can have the following properties:\r\n\t\t\t- `compress`: (Optional) A boolean which indicates whether or not to use GZIP compression. Defaults to true.\r\n\t\t\t- `useETags`: (Optional) A boolean which indicates whether or not to use ETags. ETag values are based on file content hash. Defaults to true.\r\n\t\t\t- `ignoreQueryString`: (Optional) A boolean which indicates whether or not to remove query strings from URLs before doing any processing. Defaults to true.\r\n\t\t\t- `mapper`: (Optional) A function which maps any given URL to a path on the file system. The default mapper interprets URLs as paths relative to the application's main file.\r\n\t\t\t- `cacheFilter`: (Optional) A function which decides whether a resource is cachable. Accepts a URL as argument. Return true to allow the URL to be cached and false to not cache it.\r\n\t\t\t- `maxSize`: (Optional) An integer which indicates the total maximum size of the server cache in bytes. Cachemere will automatically clear least-accessed resources from cache in order to meet the maxSize requirement. Defaults to 1000000000 (1GB).\r\n\t\t\t- `maxEntrySize`: (Optional) An integer which indicates the maximum size of a single cache entry in bytes. If a file exceeds this size, it will not be cached. Defaults to 10000000 (10MB).\r\n\t\t\t\r\n- `fetch`\r\n\t- Fetches a file from cache or from the file system if not already cached. The act of fetching the file for the first time will cause Cachemere to cache it and watch that file for any changes.\r\n\t- **Parameters**\r\n\t\t- `http.IncomingMessage`: An HTTP request object (like the 'req' object passed to a HTTP request handler).\r\n\t\t- `Function`: A callback in the form function(err, resource) - The second argument is a cachemere.Resource object. The resource object can be manipulated and it can be output to a HTTP response. See the documentation about the Resource class below.\r\n\t\tIf an err is present, it will be of type Error but with an added 'type' property which gives you details about the stage of caching in which the error occurred (read, preprocess or compress).\r\n\r\n- `set`\r\n\t- Associates a URL with some content (string or Buffer) - When fetch is called on that URL, the content specified here will be served - Cachemere will not touch the file system.\r\n\t- **Parameters**\r\n\t\t- `url`: The URL on which to serve the specified content\r\n\t\t- `content`: A string or Buffer\r\n\t\t- `mime`: The mime type of the content\r\n\t\t\r\n- `setPrepProvider`\r\n\t- Allows you to specify an optional preprocessor provider. If no prep provider is set, then Cachemere will not preprocess any of your files' contents before caching them.\r\n\t- **Parameters**\r\n\t\t- `Function`: A function which takes a URL as argument and returns a preprocessor function which will be used by Cachemere to preprocess that file's content. To skip preprocessing for a particular URL, this function should return null.\r\n\t\tA preprocessor function is in the form function(resourceData) - Where resourceData is an object with a url, path and content property. The content represent's the files content as a Buffer. The preprocessor function can return either a string or a Buffer.\r\n\t\tThe returned value will be cached as the file's preprocessed content.\r\n\r\n\t**Example:**\r\n\r\n\t```js\r\n\tvar textFileRegex = /\\.txt$/;\r\n\r\n\tvar textPrep = function (resource) {\r\n\t\t// Note that resource.content is a Buffer not a string\r\n\t\tvar data = resource.content.toString().replace(/[.]/g, '!');\r\n\t\treturn data;\r\n\t};\r\n\r\n\tcachemere.setPrepProvider(function (url) {\r\n\t\t// Only preprocess files with .txt extension\r\n\t\tif (textFileRegex.test(url)) {\r\n\t\t\treturn textPrep;\r\n\t\t}\r\n\t\treturn false;\r\n\t});\r\n\t```\r\n\r\n- `getPrepProvider`\r\n\t- Returns the preprocessor provider which is currently active.\r\n\r\n\t\r\n#### Resource\r\n\r\nA resource object is a representation of a resource on disk or in cache.\r\nThis resource can be output directly to an HTTP response object.\r\nNote that you can manipulate any of the properties of a Resource before outputting it to a response in order to customize the behaviour.\r\n\r\n##### Properties\r\n\r\n- `status` _(Number)_: The status of the HTTP response associated with this resource.\r\n- `headers` _(Object)_: An object representing headers which will be sent along with this resource's content. Feel free to add additional headers as required.\r\n- `content` _(Buffer)_: The resource's content as a Buffer.\r\n\r\n##### Methods\r\n\r\n- `output`\r\n\t- Automatically writes the resource's content and any associated headers to the HTTP response object.\r\n\t- **Parameters**\r\n\t\t- `http.ServerResponse`: A response object to output the resource's data to (status, headers and content will be sent).",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/topcloud/cachemere/issues"
  },
  "_id": "cachemere@0.9.4",
  "dist": {
    "shasum": "2f77e4e49b3f947e20c3687170fa06cf026b001d"
  },
  "_from": "cachemere@0.9.4",
  "_resolved": "https://registry.npmjs.org/cachemere/-/cachemere-0.9.4.tgz"
}
